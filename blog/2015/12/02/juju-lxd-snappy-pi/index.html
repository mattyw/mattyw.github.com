
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Juju, LXD, Ubuntu Snappy and a Raspberry pi 2 - mattyw</title>
  <meta name="author" content="Matt Williams">

  
  <meta name="description" content="I&rsquo;ve previously shown juju running on a raspberry pi 2, albeit deploying
servers in ec2. Recently the lxd project released a snap that can be &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://mattyw.github.io/blog/2015/12/02/juju-lxd-snappy-pi">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="mattyw" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-41678780-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">mattyw</a></h1>
  
    <h2>talkative, friendly, programmer</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:mattyw.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Juju, LXD, Ubuntu Snappy and a Raspberry Pi 2</h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-12-02T23:21:00+00:00" pubdate data-updated="true">Dec 2<span>nd</span>, 2015</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>I&rsquo;ve <a href="http://blog.mattyw.net/blog/2015/10/18/snappy-juju-flasher-video/">previously</a> shown juju running on a raspberry pi 2, albeit deploying
servers in ec2. Recently the lxd project <a href="https://linuxcontainers.org/lxd/getting-started-cli/">released a snap</a> that can be used
to install lxd on ubuntu snappy, it even works on a raspberry pi 2.
Around the same time lxd provider support landed in the master branch of juju.
Naturally I thought it would be cool if I could use juju to spin up some units using lxd
on my raspberry pi 2.</p>

<p>The following video shows it in action:</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/GHUWc725U84" frameborder="0" allowfullscreen></iframe>


<p>Obviously, it&rsquo;s slow and unofficial, but it&rsquo;s fun. For the curious these were the steps involved in getting this working.</p>

<ul>
<li>Juju was compiled using a raspbian image and <a href="http://dave.cheney.net/unofficial-arm-tarballs">Dave Cheney&rsquo;s arm release of go</a>.</li>
<li>I needed to turn video memory right down and the available swap space up to 1GB, my sd card will not be happy.</li>
<li>The compiled binaries were copied to my laptop where I built the juju snap and uploaded it to the raspberry pi 2 running ubuntu snappy.</li>
<li>Juju wasn&rsquo;t able to access the unix socket lxd was using. So lxd was configured to work remotely, and juju was using it remotely (they just happened to be running on the same host)</li>
<li>Some of juju&rsquo;s upstart scripts set extra limits on allowable open files and processes. upstart wouldn&rsquo;t start these services as they were beyond what was allowed. I removed these from the
upstart file, which isn&rsquo;t something you&rsquo;d want to do normally.</li>
</ul>


<p>Not exactly production ready stuff, but playing is fun.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Matt Williams</span></span>

      








  


<time datetime="2015-12-02T23:21:00+00:00" pubdate data-updated="true">Dec 2<span>nd</span>, 2015</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/juju/'>juju</a>, <a class='category' href='/blog/categories/lxd/'>lxd</a>, <a class='category' href='/blog/categories/raspberrypi/'>raspberrypi</a>, <a class='category' href='/blog/categories/snappy/'>snappy</a>, <a class='category' href='/blog/categories/ubuntu/'>ubuntu</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://mattyw.github.io/blog/2015/12/02/juju-lxd-snappy-pi/" data-via="matty_jwilliams" data-counturl="http://mattyw.github.io/blog/2015/12/02/juju-lxd-snappy-pi/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2015/11/25/go-binary-charm-layer/" title="Previous Post: go binary charm layer">&laquo; go binary charm layer</a>
      
      
        <a class="basic-alignment right" href="/blog/2016/05/03/how-i-write-go/" title="Next Post: How I write go">How I write go &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Links</h1>
  <p><a href="http://mattyw.net">mattyw.net</a></p>
  <p><a href="http://mattyjwilliams.blogspot.com">Old Blog</a></p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/05/03/how-i-write-go/">How I Write Go</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/12/02/juju-lxd-snappy-pi/">Juju, LXD, Ubuntu Snappy and a Raspberry Pi 2</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/25/go-binary-charm-layer/">Go Binary Charm Layer</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/02/jupsen-modelling-networking-partitions-with-juju/">Jupsen: Modelling Networking Partitions With Juju</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/29/juju-charm-shortcut/">The Remote-deployer Charm: Playing With Juju During a Tea Break</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/18/snappy-juju-flasher-video/">Video: Juju Status Flasher on Ubuntu Snappy</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/12/keep-a-logbook/">Keep a Logbook and Love Your Tools</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/09/simple-piglow-snap-for-raspberry-pi-2/">Simple Piglow Snap for Raspberry Pi 2</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/08/generics-and-monads-in-good-time/">Generics and Monads in Good Time</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/02/what-have-you-learned-from-language-x/">What Have You Learned From Language X?</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Tag Cloud</h1>
    <span id="tag-cloud"><a href='/blog/categories/acme' style='font-size: 107.5%'>acme(1)</a> <a href='/blog/categories/charms' style='font-size: 115.0%'>charms(2)</a> <a href='/blog/categories/clojure' style='font-size: 115.0%'>clojure(2)</a> <a href='/blog/categories/elixir' style='font-size: 115.0%'>elixir(2)</a> <a href='/blog/categories/generics' style='font-size: 107.5%'>generics(1)</a> <a href='/blog/categories/go' style='font-size: 160.0%'>go(8)</a> <a href='/blog/categories/gtd' style='font-size: 107.5%'>gtd(1)</a> <a href='/blog/categories/haskell' style='font-size: 107.5%'>haskell(1)</a> <a href='/blog/categories/juju' style='font-size: 152.5%'>juju(7)</a> <a href='/blog/categories/lxd' style='font-size: 107.5%'>lxd(1)</a> <a href='/blog/categories/monads' style='font-size: 107.5%'>monads(1)</a> <a href='/blog/categories/mongo' style='font-size: 107.5%'>mongo(1)</a> <a href='/blog/categories/notebooks' style='font-size: 107.5%'>notebooks(1)</a> <a href='/blog/categories/pens' style='font-size: 107.5%'>pens(1)</a> <a href='/blog/categories/perlis' style='font-size: 107.5%'>perlis(1)</a> <a href='/blog/categories/productivity' style='font-size: 107.5%'>productivity(1)</a> <a href='/blog/categories/raspberrypi' style='font-size: 130.0%'>raspberrypi(4)</a> <a href='/blog/categories/snappy' style='font-size: 122.5%'>snappy(3)</a> <a href='/blog/categories/survey' style='font-size: 107.5%'>survey(1)</a> <a href='/blog/categories/tools' style='font-size: 107.5%'>tools(1)</a> <a href='/blog/categories/ubuntu' style='font-size: 122.5%'>ubuntu(3)</a> <a href='/blog/categories/vim' style='font-size: 107.5%'>vim(1)</a> </span>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/mattyw">@mattyw</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'mattyw',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/107203120641670420594?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Matt Williams -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'mattyw';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://mattyw.github.io/blog/2015/12/02/juju-lxd-snappy-pi/';
        var disqus_url = 'http://mattyw.github.io/blog/2015/12/02/juju-lxd-snappy-pi/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
