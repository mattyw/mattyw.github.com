
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>mattyw</title>
  <meta name="author" content="Matt Williams">

  
  <meta name="description" content="For a while I&rsquo;ve been wanting to do a short video to show my workflow for writing go.
Last week I had a small bug to fix which I thought would &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://mattyw.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="mattyw" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-41678780-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">mattyw</a></h1>
  
    <h2>talkative, friendly, programmer</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:mattyw.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/05/03/how-i-write-go/">How I Write Go</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2016-05-03T09:16:00+01:00" pubdate data-updated="true">May 3<span>rd</span>, 2016</time>
        
         | <a href="/blog/2016/05/03/how-i-write-go/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>For a while I&rsquo;ve been wanting to do a short video to show my workflow for writing go.
Last week I had a small bug to fix which I thought would fit perfectly, so I recorded
me fixing it, and put some ragtime over the top.</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/PEbnzuMZceA" frameborder="0" allowfullscreen></iframe>


<p>For those who are interested, here&rsquo;s a list of my tools:</p>

<ul>
<li>Tmux <a href="https://github.com/mattyw/dotfiles/blob/master/tmux.conf">(my tmux.conf is here)</a></li>
<li>Vim &ndash; with no syntax highlighting &ndash; honestly, try it.

<ul>
<li>Vim is <a href="https://github.com/mattyw/dotfiles/blob/master/vimrc#L12">configured to run gofmt on save</a></li>
</ul>
</li>
<li><a href="https://github.com/mattyw/dotfiles/blob/master/t">&ldquo;t&rdquo; is a script I wrote</a> which notifys when the process is done. This is useful for long running tests</li>
<li><a href="https://github.com/rogpeppe/godef">godef</a> and <a href="https://github.com/dgryski/vim-godef">vim-godef</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/12/02/juju-lxd-snappy-pi/">Juju, LXD, Ubuntu Snappy and a Raspberry Pi 2</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-12-02T23:21:00+00:00" pubdate data-updated="true">Dec 2<span>nd</span>, 2015</time>
        
         | <a href="/blog/2015/12/02/juju-lxd-snappy-pi/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;ve <a href="http://blog.mattyw.net/blog/2015/10/18/snappy-juju-flasher-video/">previously</a> shown juju running on a raspberry pi 2, albeit deploying
servers in ec2. Recently the lxd project <a href="https://linuxcontainers.org/lxd/getting-started-cli/">released a snap</a> that can be used
to install lxd on ubuntu snappy, it even works on a raspberry pi 2.
Around the same time lxd provider support landed in the master branch of juju.
Naturally I thought it would be cool if I could use juju to spin up some units using lxd
on my raspberry pi 2.</p>

<p>The following video shows it in action:</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/GHUWc725U84" frameborder="0" allowfullscreen></iframe>


<p>Obviously, it&rsquo;s slow and unofficial, but it&rsquo;s fun. For the curious these were the steps involved in getting this working.</p>

<ul>
<li>Juju was compiled using a raspbian image and <a href="http://dave.cheney.net/unofficial-arm-tarballs">Dave Cheney&rsquo;s arm release of go</a>.</li>
<li>I needed to turn video memory right down and the available swap space up to 1GB, my sd card will not be happy.</li>
<li>The compiled binaries were copied to my laptop where I built the juju snap and uploaded it to the raspberry pi 2 running ubuntu snappy.</li>
<li>Juju wasn&rsquo;t able to access the unix socket lxd was using. So lxd was configured to work remotely, and juju was using it remotely (they just happened to be running on the same host)</li>
<li>Some of juju&rsquo;s upstart scripts set extra limits on allowable open files and processes. upstart wouldn&rsquo;t start these services as they were beyond what was allowed. I removed these from the
upstart file, which isn&rsquo;t something you&rsquo;d want to do normally.</li>
</ul>


<p>Not exactly production ready stuff, but playing is fun.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/11/25/go-binary-charm-layer/">Go Binary Charm Layer</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-11-25T09:26:00+00:00" pubdate data-updated="true">Nov 25<span>th</span>, 2015</time>
        
         | <a href="/blog/2015/11/25/go-binary-charm-layer/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I like go. One of the things I like is not worrying about dependencies during deployment.
You just scp your binary to your server and you&rsquo;re done. Well, after you configure it to connect to the
database, ah yes, we forgot about haproxy, let&rsquo;s set that up as well, but after scping to
a server and doing some minor setup you&rsquo;re ready to go, scale it out you say? Just scp to other
servers, do the same config setup&hellip;&hellip;..</p>

<p>The solution to this problem is to use an orchestration tool like <a href="https://juju.ubuntu.com/about">juju</a>. Now thanks to the <a href="https://github.com/cloud-green/go-binary-layer">go binary layer</a> orchestrating your go program with juju couldn&rsquo;t be easier.</p>

<p>Here&rsquo;s how it works. The go-binary layer looks in the top level of your charm for a go-binary.yaml file that contains the name of your binary and any arguments that should be passed to it.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="c1">#go-binary.yaml</span>
</span><span class='line'><span class="l-Scalar-Plain">binary</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">server</span>
</span><span class='line'><span class="l-Scalar-Plain">args</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/etc/myserver/config.yaml</span>
</span></code></pre></td></tr></table></div></figure>


<p>Your compiled binary should be placed in a &ldquo;files&rdquo; directory at the top level of your charm. Build your charm and you&rsquo;re all done.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>tree
</span><span class='line'>.
</span><span class='line'>├── files
</span><span class='line'>│   ├── server
</span><span class='line'>├── go-binary.yaml
</span><span class='line'>├── layer.yaml
</span><span class='line'>├── metadata.yaml
</span></code></pre></td></tr></table></div></figure>


<p>Under the covers the go-binary layer will add your binary to $PATH,write an upstart file for your binary and start it when the server starts.</p>

<p>There are examples of this in action with the http (website) relation (<a href="https://github.com/mattyw/simple-server-charm">https://github.com/mattyw/simple-server-charm</a>)</p>

<p>and with the mongodb relation (<a href="https://github.com/mattyw/simple-server-mongo-charm">https://github.com/mattyw/simple-server-mongo-charm</a>).</p>

<p>If you&rsquo;d like to see these charms in action take a look at the following videos:</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/YgYOyf-3QwU" frameborder="0" allowfullscreen></iframe>




<iframe width="560" height="315" src="https://www.youtube.com/embed/Cf5o58MzCjs" frameborder="0" allowfullscreen></iframe>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/11/02/jupsen-modelling-networking-partitions-with-juju/">Jupsen: Modelling Networking Partitions With Juju</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-11-02T22:11:00+00:00" pubdate data-updated="true">Nov 2<span>nd</span>, 2015</time>
        
         | <a href="/blog/2015/11/02/jupsen-modelling-networking-partitions-with-juju/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Jupsen is a tool that allows you to drop or delay packets between juju units.</p>

<h2>Why is this useful?</h2>

<p>Network problems happen, if you&rsquo;re working on a distributed system you need
to deal with them, this is much easier to do if you&rsquo;re able to recreate these
situations easily.</p>

<p>With jupsen you can</p>

<ul>
<li>Block traffic between two units in only one direction</li>
<li>Block traffic between two units in only both directions</li>
<li>Delay packets in one direction</li>
<li>Delay packets in both directions.</li>
</ul>


<p>This can be used to recreate some of the experiments in Kyle Kingsbury&rsquo;s jupsen series
(from which I have shamefully taken the name) (<a href="https://aphyr.com/tags/jepsen">https://aphyr.com/tags/jepsen</a>)</p>

<p>If you want to have a play around with jupsen you can get it here: (<a href="https://github.com/mattyw/jupsen">https://github.com/mattyw/jupsen</a>)</p>

<p>If you want to see it in action you can take a look at this demo I gave at the recent
Ubuntu Online Summit.</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/xp54gcMMUfQ" frameborder="0" allowfullscreen></iframe>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/29/juju-charm-shortcut/">The Remote-deployer Charm: Playing With Juju During a Tea Break</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-10-29T11:23:00+00:00" pubdate data-updated="true">Oct 29<span>th</span>, 2015</time>
        
         | <a href="/blog/2015/10/29/juju-charm-shortcut/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>The power of juju, and its model driven approach to deployments is
undoubtedly the relationships. Being able to specify what services you
depend on and what you provide to other services is extremely powerful.</p>

<p>To get all of those benefits you need to write your app as a charm. With the new
layering approach (<a href="http://blog.dasroot.net/2015-charming-2-point-oh.html">http://blog.dasroot.net/2015-charming-2-point-oh.html</a>) this has
got even easier. There will be more posts about that coming soon.</p>

<p>But I&rsquo;ve always pondered the following:</p>

<p><em>Is there a useful shortcut around writing a charm that would let you deploy your app in &lt; 5 minutes</em></p>

<p>My idea was the remote-deployer charm (<a href="https://jujucharms.com/u/mattyw/remote-deployer/trusty/2">https://jujucharms.com/u/mattyw/remote-deployer/trusty/2</a>)</p>

<p>It doesn&rsquo;t replace writing your own charm, indeed the cases in which it&rsquo;s useful are limited.
(you must have a publicly available file path that you want to deploy from)
<strong>The intention is to facilitate playing with juju in less time than the typical tea break.</strong></p>

<p>The idea goes:</p>

<ol>
<li>Deploy the charm</li>
<li>Give it something to do</li>
</ol>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>juju deploy cs:~mattyw/trusty/remote-deployer-2
</span><span class='line'>juju action <span class="k">do </span>remote-deployer/0 deploy <span class="nb">source</span><span class="o">=</span>https://github.com/mattyw/compojure-app-bootstrap
</span></code></pre></td></tr></table></div></figure>


<p>The something to do is just pointing it at some remote file tree (like a github url).
It downloads this file tree and looks for a file called <strong>remote-deployer</strong>. It runs this
as the ubuntu user. The example above installs the clojure build tool lein and creates
a hello world web app (<a href="https://github.com/mattyw/compojure-app-bootstrap">https://github.com/mattyw/compojure-app-bootstrap</a>)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># remote-deployer</span>
</span><span class='line'><span class="c">#!/bin/sh</span>
</span><span class='line'><span class="nb">set</span> -ev
</span><span class='line'>sudo apt-get install -y --force-yes openjdk-7-jre-headless
</span><span class='line'>sudo cp lein /usr/bin
</span><span class='line'><span class="nb">cd</span> <span class="nv">$HOME</span> <span class="o">&amp;&amp;</span> lein new compojure-app my-app
</span><span class='line'><span class="nb">cd</span> <span class="nv">$HOME</span>/my-app <span class="o">&amp;&amp;</span> nohup lein ring server &amp;
</span><span class='line'>open-port 3000
</span></code></pre></td></tr></table></div></figure>


<p>Juju fans will notice that the normal hook tools are available to you in this file.</p>

<p>If you&rsquo;d like to suggest or help make improvements the project is here: <a href="https://github.com/mattyw/remote-deployer-charm">https://github.com/mattyw/remote-deployer-charm</a></p>

<p>Take a look at in action:</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/2a2WxDN4ZJM" frameborder="0" allowfullscreen></iframe>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/18/snappy-juju-flasher-video/">Video: Juju Status Flasher on Ubuntu Snappy</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-10-18T10:02:00+01:00" pubdate data-updated="true">Oct 18<span>th</span>, 2015</time>
        
         | <a href="/blog/2015/10/18/snappy-juju-flasher-video/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><iframe width="560" height="315" src="https://www.youtube.com/embed/JnbrWRDFqVo" frameborder="0" allowfullscreen></iframe>


<p>I&rsquo;d like to share a proof of concept project I&rsquo;ve been working on that combines
the worlds of ubuntu snappy and juju.</p>

<p>I wanted to use the flashing leds on the raspberry pi 2&rsquo;s piglow to tell me the
status of my cloud services. The idea being that if there&rsquo;s something I need to fix
the flashing leds will tell me, without me having to keep checking my phone or laptop
to get updates.</p>

<p>This demo will use the <a href="https://jujucharms.com/realtime-syslog-analytics/">realtime syslog analytics</a>
big data bundle as my example environment. It&rsquo;s deployed in ec2 but it&rsquo;s controlled and managed
by juju running on my raspberry pi. I&rsquo;m going to show you a working environment with happy led status.
Then I&rsquo;m going to cause some trouble and we&rsquo;ll see the leds change to unhappy.</p>

<p>The idea being that if I want to know the status of my cloud services I only need to glance at my
raspberry pi for a moment.</p>

<p>There&rsquo;s still some work to be done around optimising the various led patterns. There could be a way
that I could convey seriousness of the problem via the leds, or even how long there has been a problem.
That&rsquo;s work that can come later.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/12/keep-a-logbook/">Keep a Logbook and Love Your Tools</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-10-12T09:46:00+01:00" pubdate data-updated="true">Oct 12<span>th</span>, 2015</time>
        
         | <a href="/blog/2015/10/12/keep-a-logbook/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>TL;DR</h2>

<p>If your job requires thinking of any kind you should be keeping a log book/ journal
to keep a note of what you are doing. If you learn to love the process of keeping the journal
it will be even more useful to you.</p>

<h2>The story</h2>

<p>When I first started work I instinctively started keeping a logbook of all of my activities.
I grabbed an A4 notebook out of the stationary cupboard and started writing, this was mostly
because the rate of information coming at me was more than I could handle, so I wanted
somewhere to store it that was better than my head.
But it was also because I could own a nice A4 notebook without having to pay for it, and this was quite a novelty.</p>

<p>Then this year I discovered the <a href="http://www.relay.fm/penaddict">pen addict podcast</a> and (despite
my left handedness) I really got into paper and pens again. For the past 3 months I&rsquo;ve been
keeping a log of my work. Experiments, meetings, things that need fixing, ideas, new tricks, everything to do with my job.</p>

<h2>Keep a Logbook</h2>

<p>This is how I make use of a logbook, it&rsquo;s mostly common sense:</p>

<ol>
<li>Always have it with me, even if I go for a walk.</li>
<li>If you&rsquo;re working at your desk, have it within arms reach.</li>
<li>If you take a break, leave a note of where you&rsquo;ve left off.</li>
<li>When you return from a break refer to your log book to help you regain context.</li>
</ol>


<p>This is what I write:</p>

<ol>
<li>Things I need to remember.</li>
<li>Things I need to do.</li>
<li>Things I want to talk about with colleagues.</li>
<li>Ideas for future projects.</li>
<li>Solutions to problems</li>
<li>Results of experiments I&rsquo;ve done</li>
<li>Cool tricks I&rsquo;ve discovered (editor shortcuts, programming patterns etc)</li>
</ol>


<h2>Reviewing your Logbook</h2>

<p>An important part of any process is reviewing. Most days I will flip through recent pages of my notebooks
and record anything that I think is important in Evernote or my teams kanban board.
The act of reviewing notes also helps cement any new tricks I&rsquo;d learned.
The whole process I use is a topic for another time.</p>

<h2>Love your tools</h2>

<p>Something I&rsquo;ve known to be true in programming for a number of years is that if you
can learn to really love the tools you use then no matter how mundane your task seems to
be you will love doing it, because using the tools is part of the fun. I&rsquo;ve started to realise
that the same is true of a number of walks of life. I&rsquo;ve bought a couple of fountain pens, made my own
pocket and full size midori notebooks, spent a stupid amount of money on field notes. But I
also have a collection of programming related notes, ideas, insights that I keep catalogued. The
process of writing all these notes is one I enjoy, in fact I look forward to it because I&rsquo;ve come
to love the tools I use to do it.</p>

<h2>My tools</h2>

<p><img src="/images/notebooks.jpg"></p>

<p>Here&rsquo;s my current stuff (left->right, top->bottom)</p>

<ol>
<li>A4 clipboard from some team building thing I did a number of years back.</li>
<li>A Field notes sized fauxdori (it also supports midori inserts).</li>
<li>A lamy safari with LH nib.</li>
<li>A Kaweco skyline with F nib.</li>
<li>Full size fauxdori. (It also support field notes)</li>
</ol>


<p>I made both fauxdoris myself, which means the act of using them is a pleasure in itself.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/10/09/simple-piglow-snap-for-raspberry-pi-2/">Simple Piglow Snap for Raspberry Pi 2</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-10-09T22:43:00+01:00" pubdate data-updated="true">Oct 9<span>th</span>, 2015</time>
        
         | <a href="/blog/2015/10/09/simple-piglow-snap-for-raspberry-pi-2/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Using a Raspberry Pi 2 with Ubuntu Snappy installed we&rsquo;re going to write a
simple snap that will flash a piglow attached to the gpio pins.</p>

<p>If you want to skip these steps you can download the snap itself from <a href="https://www.dropbox.com/s/2o298qugyts0r3o/hello-piglow_1.0.0_all.snap?dl=0">here</a></p>

<h2>1. A simple piglow flashing binary</h2>

<p>To make things simple we&rsquo;ll use go to produce a simple binary that will
flash the legs of the piglow. We&rsquo;re using go because the static compilation means
our snap will have no dependencies to deal with. The code itself is small.
<a href="https://github.com/mattyw/flasher">https://github.com/mattyw/flasher</a>
I modified the piglow library I was using to get a bit more feedback about piglow
errors, the change is trivial to revert should you need to.</p>

<h2>2. Create the snap</h2>

<p>The package structure is simple</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>├── bin
</span><span class='line'>│   └── flasher
</span><span class='line'>└── meta
</span><span class='line'>    ├── package.yaml
</span><span class='line'>    └── readme.md
</span></code></pre></td></tr></table></div></figure>


<p>flasher is the binary I produced in step 1. The package.yaml just contains
information about the snap:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">hello-piglow</span>
</span><span class='line'><span class="l-Scalar-Plain">version</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">1.0.0</span>
</span><span class='line'><span class="l-Scalar-Plain">vendor</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">me</span>
</span><span class='line'><span class="l-Scalar-Plain">binaries</span><span class="p-Indicator">:</span>
</span><span class='line'> <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">bin/flasher</span>
</span></code></pre></td></tr></table></div></figure>


<p>Once you&rsquo;ve got all this in place build it and send it over to your pi.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>snappy build .
</span><span class='line'>snappy-remote --url<span class="o">=</span>ssh://&lt;ip-address&gt;:22 install &lt;snap-name&gt;
</span></code></pre></td></tr></table></div></figure>


<h2>3. On the Pi</h2>

<p>You need to give your snap permission to access the i2c device</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo snappy hw-assign hello-piglow.sideload /dev/i2c-1
</span></code></pre></td></tr></table></div></figure>


<h2>4. You&rsquo;re done</h2>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo hello-piglow.flasher
</span></code></pre></td></tr></table></div></figure>


<p>If all goes well you should have a flashing piglow</p>

<iframe width="560" height="315" src="https://www.youtube.com/embed/73tOQBqef7Q" frameborder="0" allowfullscreen></iframe>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/04/08/generics-and-monads-in-good-time/">Generics and Monads in Good Time</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-04-08T09:11:00+01:00" pubdate data-updated="true">Apr 8<span>th</span>, 2015</time>
        
         | <a href="/blog/2015/04/08/generics-and-monads-in-good-time/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In this blog post I attempt to connect monads in haskell with generics in go, avoiding flame wars as I go.
If I&rsquo;ve made mistakes please let me know and I&rsquo;ll gladly fix them.</p>

<h2>The Thought</h2>

<p>I&rsquo;ve just finished listening to episode 10 of the <a href="http://bikeshed.fm/10">bikeshed</a> which is
largely a discussion about haskell, and well worth a listen to. However the conversation that starts
at around 29:40 is what triggered this thought.</p>

<h2>Haskell without monads</h2>

<p>If you want to do IO in Haskell you need to use monads. But it&rsquo;s possible to write a number of programs without IO(1).</p>

<p>According to <a href="http://haskell.cs.yale.edu/wp-content/uploads/2011/02/history.pdf">&ldquo;A history of haskell, being lazy with class&rdquo;</a> 6 years passed between the first
release of haskell, and monadic IO being introduced.
Why so long?</p>

<p><strong>The language designers were under no pressure, they had time to think about how IO should be dealt with in the language.</strong></p>

<h2>The question of Go Generics</h2>

<p>Go doesn&rsquo;t support generics, and it&rsquo;s often cited as a big downside or even a failing of the language. However you can still write very useful programs in go
without generics(1). But here&rsquo;s the thing:</p>

<p><strong>The language designers are under no pressure, they have time to think about how generics should be dealt with in the language.</strong></p>

<p>This is important. Just because a language doesn&rsquo;t do something now, doesn&rsquo;t mean it never will.
If you&rsquo;ve not taken a look at go previously because you&rsquo;ve been swayed by the &ldquo;no generics&rdquo; argument I recomend taking a look at go again.</p>

<p>(1) An infinite number for maths fans</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/04/02/what-have-you-learned-from-language-x/">What Have You Learned From Language X?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-04-02T16:58:00+01:00" pubdate data-updated="true">Apr 2<span>nd</span>, 2015</time>
        
         | <a href="/blog/2015/04/02/what-have-you-learned-from-language-x/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Alan Perlis wrote</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>A language that doesn't affect the way you think about programming, is not worth knowing.</span></code></pre></td></tr></table></div></figure>


<p>That&rsquo;s an interesting statement, it made me wonder what people think they&rsquo;ve learned from certain
programming langues, and how much it differs between people.</p>

<p>If you have a moment, I&rsquo;d love to know:
<a href="https://docs.google.com/forms/d/1_Wc74F9UmGmYiD5lfJlwfFkYoEqVKsxV3_lX6Mvylno/viewform">Survey</a></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/2/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Links</h1>
  <p><a href="http://mattyw.net">mattyw.net</a></p>
  <p><a href="http://mattyjwilliams.blogspot.com">Old Blog</a></p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/05/03/how-i-write-go/">How I Write Go</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/12/02/juju-lxd-snappy-pi/">Juju, LXD, Ubuntu Snappy and a Raspberry Pi 2</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/25/go-binary-charm-layer/">Go Binary Charm Layer</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/11/02/jupsen-modelling-networking-partitions-with-juju/">Jupsen: Modelling Networking Partitions With Juju</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/29/juju-charm-shortcut/">The Remote-deployer Charm: Playing With Juju During a Tea Break</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/18/snappy-juju-flasher-video/">Video: Juju Status Flasher on Ubuntu Snappy</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/12/keep-a-logbook/">Keep a Logbook and Love Your Tools</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/09/simple-piglow-snap-for-raspberry-pi-2/">Simple Piglow Snap for Raspberry Pi 2</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/08/generics-and-monads-in-good-time/">Generics and Monads in Good Time</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/04/02/what-have-you-learned-from-language-x/">What Have You Learned From Language X?</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Tag Cloud</h1>
    <span id="tag-cloud"><a href='/blog/categories/acme' style='font-size: 107.5%'>acme(1)</a> <a href='/blog/categories/charms' style='font-size: 115.0%'>charms(2)</a> <a href='/blog/categories/clojure' style='font-size: 115.0%'>clojure(2)</a> <a href='/blog/categories/elixir' style='font-size: 115.0%'>elixir(2)</a> <a href='/blog/categories/generics' style='font-size: 107.5%'>generics(1)</a> <a href='/blog/categories/go' style='font-size: 160.0%'>go(8)</a> <a href='/blog/categories/gtd' style='font-size: 107.5%'>gtd(1)</a> <a href='/blog/categories/haskell' style='font-size: 107.5%'>haskell(1)</a> <a href='/blog/categories/juju' style='font-size: 152.5%'>juju(7)</a> <a href='/blog/categories/lxd' style='font-size: 107.5%'>lxd(1)</a> <a href='/blog/categories/monads' style='font-size: 107.5%'>monads(1)</a> <a href='/blog/categories/mongo' style='font-size: 107.5%'>mongo(1)</a> <a href='/blog/categories/notebooks' style='font-size: 107.5%'>notebooks(1)</a> <a href='/blog/categories/pens' style='font-size: 107.5%'>pens(1)</a> <a href='/blog/categories/perlis' style='font-size: 107.5%'>perlis(1)</a> <a href='/blog/categories/productivity' style='font-size: 107.5%'>productivity(1)</a> <a href='/blog/categories/raspberrypi' style='font-size: 130.0%'>raspberrypi(4)</a> <a href='/blog/categories/snappy' style='font-size: 122.5%'>snappy(3)</a> <a href='/blog/categories/survey' style='font-size: 107.5%'>survey(1)</a> <a href='/blog/categories/tools' style='font-size: 107.5%'>tools(1)</a> <a href='/blog/categories/ubuntu' style='font-size: 122.5%'>ubuntu(3)</a> <a href='/blog/categories/vim' style='font-size: 107.5%'>vim(1)</a> </span>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/mattyw">@mattyw</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'mattyw',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>



<section class="googleplus">
  <h1>
    <a href="https://plus.google.com/107203120641670420594?rel=author">
      <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
      Google+
    </a>
  </h1>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Matt Williams -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'mattyw';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
